<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    
    <script>
      document.addEventListener("DOMContentLoaded", e => {
        let asyncOut = document.querySelector("#async-out")
        asyncOut.textContent = "yaaaay"
        google.script.run
            .withSuccessHandler((data) => { asyncOut.textContent += " >>> " + data })
            .withFailureHandler((error) => { asyncOut.textContent += " !! ERROR !! " + error })
            .getGamesStringified()
      })
    </script>

  </head>
  <body>
    <header>
      <h1>So I've been emulating...</h1>
    </header>

    <pre id="async-out">
      #async-out
    </pre>

    <?!= HtmlService.createTemplateFromFile('icanhazcomponent').evaluate().getContent() ?>
    <br>

    In <?= SAVES_FOLDER ?>
    
    <ul>
      <? for (let file of listSaves()) { ?>
        <li><?= file.getName() ?>
      <? } ?>
    </ul>

    <pre>
      <?= JSON.stringify(getGames(), null, 4) ?>
    </pre>
  </body>
</html>
